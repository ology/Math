#!/usr/bin/env perl
use strict;
use warnings;

use HTML::Show;
use Chart::Plotly;
use Chart::Plotly::Plot;
use Chart::Plotly::Trace::Scatter;
use Math::Big 'primes';

my $max  = shift || 20;
my $mod  = shift || 6;
my $size = shift || 600;

my @xs;
my @ys;

my $previous;

for my $p ( primes($max) ) {
    my $y = $p % $mod;
    warn "$p % $mod = $y\n";

    if ( $previous ) {
        my $x = $previous % $mod;
        warn "\t$previous % $mod = $x\n";
        push @xs, $x->numify();
        push @ys, $y->numify();
    }

    $previous = $p;
}

my $scatter = Chart::Plotly::Trace::Scatter->new( x => \@xs, y => \@ys );
my $plot = Chart::Plotly::Plot->new();
$plot->add_trace($scatter);
$plot->layout({
    height => $size,
    width  => $size,
    title  => 'Primes below '. $max . ' Modulo ' . $mod . ' vs Next Prime Modulo ' . $mod,
    xaxis  => { title => 'Primes Modulo ' . $mod, },
    yaxis  => { title => 'Next Prime Modulo ' . $mod, },
});
 
Chart::Plotly::show_plot($plot);
